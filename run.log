
> find-my-crew@0.1.0 dev
> next dev

▲ Next.js 16.1.1 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://192.168.1.5:3000
- Environments: .env.local

✓ Starting...
✓ Ready in 1614ms
 GET /crew/dashboard 200 in 767ms (compile: 583ms, render: 184ms)
LogoWithText userRole: 
LogoWithText userRole: 
 GET / 200 in 1172ms (compile: 671ms, render: 501ms)
 GET /api/ai/assistant/actions 200 in 782ms (compile: 145ms, proxy.ts: 121ms, render: 516ms)
 GET /api/ai/assistant/suggestions 200 in 802ms (compile: 206ms, proxy.ts: 126ms, render: 471ms)
 GET /api/notifications?limit=5&offset=0 200 in 910ms (compile: 264ms, proxy.ts: 122ms, render: 524ms)
 GET /api/ai/assistant/suggestions 200 in 283ms (compile: 15ms, proxy.ts: 3ms, render: 265ms)
 GET /api/ai/assistant/actions 200 in 303ms (compile: 15ms, proxy.ts: 14ms, render: 274ms)
 GET /api/notifications?limit=5&offset=0 200 in 468ms (compile: 12ms, proxy.ts: 3ms, render: 453ms)
 GET /api/notifications?limit=5&offset=0 200 in 512ms (compile: 14ms, proxy.ts: 8ms, render: 490ms)
 GET /crew/dashboard 200 in 46ms (compile: 14ms, render: 32ms)
 GET /api/legs/viewport?min_lng=-76.50807287862972&min_lat=-13.903862518368783&max_lng=76.5080728786296&max_lat=53.90386251837367&min_experience_level=4 200 in 354ms (compile: 44ms, proxy.ts: 4ms, render: 306ms)
 GET /api/legs/viewport?min_lng=-75.09799451414635&min_lat=4.799424929386973&max_lng=97.62594461459747&max_lat=70.13207763937663&min_experience_level=4 200 in 214ms (compile: 5ms, proxy.ts: 5ms, render: 204ms)
 GET /api/ai/assistant/conversations 200 in 410ms (compile: 41ms, proxy.ts: 3ms, render: 366ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: 'e7237510-704f-4d99-b11e-016b8a6fb8d6' },
    Symbol(async_id_symbol): 23709,
    Symbol(trigger_async_id_symbol): 23701
  },
  resolvedParams: { legId: 'e7237510-704f-4d99-b11e-016b8a6fb8d6' },
  legId: 'e7237510-704f-4d99-b11e-016b8a6fb8d6'
}
 GET /api/legs/e7237510-704f-4d99-b11e-016b8a6fb8d6/waypoints 200 in 1090ms (compile: 767ms, proxy.ts: 3ms, render: 319ms)
 GET /api/legs/viewport?min_lng=-102.00941681356761&min_lat=10.498617647412857&max_lng=70.94281795193027&max_lat=67.43706039797803&min_experience_level=4 200 in 201ms (compile: 3ms, proxy.ts: 4ms, render: 193ms)
 GET /api/legs/viewport?min_lng=-60.48249122541051&min_lat=2.9369652564965776&max_lng=94.15220621216537&max_lat=54.604091056087015&min_experience_level=4 200 in 185ms (compile: 5ms, proxy.ts: 5ms, render: 175ms)
 GET /api/legs/viewport?min_lng=-38.70520215129119&min_lat=11.590410560560386&max_lng=83.48547558879056&max_lat=49.472511300148795&min_experience_level=4 200 in 149ms (compile: 3ms, proxy.ts: 4ms, render: 143ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
    Symbol(async_id_symbol): 28849,
    Symbol(trigger_async_id_symbol): 28841
  },
  resolvedParams: { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
  legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765'
}
 GET /api/legs/viewport?min_lng=7.141371155121988&min_lat=31.010250463590864&max_lng=41.80421839001619&max_lat=42.263874407535695&min_experience_level=4 200 in 138ms (compile: 3ms, proxy.ts: 3ms, render: 133ms)
 GET /api/legs/109066b2-7276-4c0d-a2f3-6aa5bba3d765/waypoints 200 in 290ms (compile: 14ms, proxy.ts: 2ms, render: 274ms)
 GET /api/legs/viewport?min_lng=23.361459408380426&min_lat=35.232514299999494&max_lng=27.20538859162096&max_lat=36.52249869999915&min_experience_level=4 200 in 145ms (compile: 3ms, proxy.ts: 3ms, render: 139ms)
 GET /api/legs/viewport?min_lng=2.287056927962624&min_lat=31.129211639890414&max_lng=46.806291071813405&max_lat=45.17609907908974&min_experience_level=4 200 in 139ms (compile: 2ms, proxy.ts: 2ms, render: 135ms)
 GET /api/ai/assistant/conversations 200 in 392ms (compile: 6ms, proxy.ts: 4ms, render: 381ms)
 GET /api/notifications?limit=5&offset=0 200 in 480ms (compile: 15ms, proxy.ts: 3ms, render: 462ms)
 GET /api/legs/viewport?min_lng=-28.65268119989929&min_lat=20.222072183516048&max_lng=75.07513500509214&max_lat=51.75088608585543&min_experience_level=4 200 in 197ms (compile: 3ms, proxy.ts: 2ms, render: 191ms)
LogoWithText userRole: 
 GET /crew/dashboard 200 in 71ms (compile: 11ms, render: 60ms)
 GET /api/ai/assistant/suggestions 200 in 282ms (compile: 6ms, proxy.ts: 4ms, render: 272ms)
 GET /api/ai/assistant/actions 200 in 422ms (compile: 9ms, proxy.ts: 5ms, render: 408ms)
 GET /api/ai/assistant/suggestions 200 in 266ms (compile: 16ms, proxy.ts: 3ms, render: 246ms)
 GET /api/notifications?limit=5&offset=0 200 in 539ms (compile: 8ms, proxy.ts: 4ms, render: 528ms)
 GET /api/ai/assistant/actions 200 in 271ms (compile: 6ms, proxy.ts: 4ms, render: 262ms)
 GET /api/notifications?limit=5&offset=0 200 in 477ms (compile: 13ms, proxy.ts: 4ms, render: 460ms)
 GET /api/legs/viewport?min_lng=-76.50807287862972&min_lat=-13.903862518368783&max_lng=76.5080728786296&max_lat=53.90386251837367&min_experience_level=4 200 in 185ms (compile: 4ms, proxy.ts: 10ms, render: 171ms)
 GET /api/notifications?limit=5&offset=0 200 in 542ms (compile: 29ms, proxy.ts: 5ms, render: 508ms)
 GET /api/legs/viewport?min_lng=-72.47988862219677&min_lat=-1.623602143807986&max_lng=128.0623395648875&max_lat=75.52993011396529&min_experience_level=4 200 in 151ms (compile: 2ms, proxy.ts: 2ms, render: 146ms)
 GET /api/legs/viewport?min_lng=-1.0435131906745028&min_lat=26.869523269248035&max_lng=55.89375897916142&max_lat=46.57408549734686&min_experience_level=4 200 in 166ms (compile: 2ms, proxy.ts: 2ms, render: 161ms)
 GET /api/legs/viewport?min_lng=7.480459803194691&min_lat=30.472368742462237&max_lng=47.18989963479518&max_lat=44.53835832830234&min_experience_level=4 200 in 133ms (compile: 4ms, proxy.ts: 3ms, render: 125ms)
 GET /api/ai/assistant/conversations 200 in 382ms (compile: 3ms, proxy.ts: 3ms, render: 376ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
    Symbol(async_id_symbol): 54640,
    Symbol(trigger_async_id_symbol): 54632
  },
  resolvedParams: { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
  legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765'
}
 GET /api/legs/109066b2-7276-4c0d-a2f3-6aa5bba3d765/waypoints 200 in 351ms (compile: 13ms, proxy.ts: 4ms, render: 334ms)
 GET /api/legs/viewport?min_lng=23.361459408380426&min_lat=35.232514299999494&max_lng=27.20538859162096&max_lat=36.52249869999915&min_experience_level=4 200 in 180ms (compile: 3ms, proxy.ts: 4ms, render: 173ms)
 GET /api/legs/viewport?min_lng=16.618869557707967&min_lat=33.88688099422876&max_lng=32.64614150413112&max_lat=39.18383233134733&min_experience_level=4 200 in 148ms (compile: 3ms, proxy.ts: 3ms, render: 142ms)
 GET /api/notifications?limit=5&offset=0 200 in 602ms (compile: 5ms, proxy.ts: 4ms, render: 593ms)
 GET /api/legs/viewport?min_lng=4.662529386990997&min_lat=28.469233717292383&max_lng=48.452801131957244&max_lat=42.71193836255205&min_experience_level=4 200 in 315ms (compile: 4ms, proxy.ts: 4ms, render: 307ms)
 GET /api/ai/assistant/conversations 200 in 269ms (compile: 5ms, proxy.ts: 3ms, render: 261ms)
[API Chat Route] === POST /api/ai/assistant/chat === 
[API Chat Route] Verifying authentication... 
[API Chat Route] User authenticated: {
  userId: '4c99720f-b1b6-431b-b73f-f979250fb0c3',
  email: 'janilauria.makelainen@outlook.com'
}
[API Chat Route] Request body parsed: { messageLength: 26, conversationId: null }
[API Chat Route] Calling chat service... 
[AI Assistant Service] === Starting chat === 
[AI Assistant Service] Request message: I'd like to sail in greece
[AI Assistant Service] Options: {
  userId: '4c99720f-b1b6-431b-b73f-f979250fb0c3',
  conversationId: null
}
[AI Assistant Service] Checking AI consent... 
[AI Assistant Service] AI consent verified 
[AI Assistant Service] Creating new conversation... 
[AI Assistant Service] New conversation created: 6cb09623-2f24-4d01-90ac-a280a7fbb5ef
[AI Assistant Service] Saving user message... 
[AI Assistant Service] User message saved: b436eab7-a369-45ab-81aa-5e200c78b4fa
[AI Assistant Service] Building user context... 
[Context Builder] --- getUserContext started --- { userId: '4c99720f-b1b6-431b-b73f-f979250fb0c3' }
[Context Builder] Fetching user profile... 
[Context Builder] Profile fetched: { hasProfile: true, username: 'samthemaster', roles: [ 'crew' ] }
[Context Builder] User is crew, fetching recent registrations... 
[Context Builder] Recent registrations fetched: { count: 0 }
[Context Builder] Counting pending actions and suggestions... 
[Context Builder] Context counts: { pendingActionsCount: 0, suggestionsCount: 0 }
[Context Builder] --- getUserContext completed --- 
[AI Assistant Service] User context built: {
  hasProfile: true,
  roles: [ 'crew' ],
  boatCount: 0,
  registrationCount: 0
}
[AI Assistant Service] Loading conversation history... 
[AI Assistant Service] History loaded: { messageCount: 1 }
[AI Assistant Service] Available tools: [
  'search_journeys',
  'search_legs',
  'search_legs_by_location',
  'get_leg_details',
  'get_journey_details',
  'get_user_profile',
  'get_user_registrations',
  'get_boat_details',
  'analyze_leg_match',
  'suggest_register_for_leg',
  'suggest_profile_update'
]
[Context Builder] Building system prompt... {
  hasProfile: true,
  roles: [ 'crew' ],
  boatCount: 0,
  registrationCount: 0
}
[AI Assistant Service] Built AI messages: { totalMessages: 2 }
[AI Assistant Service] Processing AI with tools... 
[AI Assistant Service] --- processAIWithTools started --- 
[AI Assistant Service] Tool iteration 1/5 
[AI Assistant Service] Calling AI service... {
  prompt: '\n' +
    'Available tools:\n' +
    '- search_journeys: Search for published sailing journeys or voyages. Use this when user wants to find long sailing journeys that span multiple legs, typically taking several weeks or months to complete.\n' +
    '- search_legs: Search for sailing opportunities or sailing legs or passages. Use this for general searches without specific location requirements. For location-based searches (e.g., "from Barcelona", "to Caribbean"), use search_legs_by_location instead.\n' +
    '- search_legs_by_location: Search for sailing legs by geographic location using bounding box coordinates. Use this when user mentions specific places, regions, or areas for departure or arrival. YOU must determine the appropriate bounding box coordinates for the location. IMPORTANT: Use nested departureBbox/arrivalBbox objects with numeric coordinates. Example: {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}\n' +
    '- get_leg_details: Get detailed information about a specific leg including waypoints, requirements, and current registrations.\n' +
    '- get_journey_details: Get detailed information about a journey including all its legs and the boat.\n' +
    "- get_user_profile: Get the current user's profile information including skills, experience, and preferences.\n" +
    "- get_user_registrations: Get the current user's registration history for sailing legs.\n" +
    '- get_boat_details: Get detailed information about a specific boat.\n' +
    "- analyze_leg_match: Analyze how well the current user's profile matches a specific leg's requirements. Returns match percentage and explanation.\n" +
    '- suggest_register_for_leg: Suggest that the user register for a specific sailing leg. Creates a pending action that the user must approve. IMPORTANT: Both legId and reason parameters are REQUIRED. Example: {"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-here", "reason": "This leg matches your experience level and sailing preferences"}}\n' +
    `- suggest_profile_update: Suggest updates to the user's profile. Creates a pending action that the user must approve. IMPORTANT: Both updates and reason parameters are REQUIRED. Example: {"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"]}, "reason": "Adding these skills will help you qualify for more sailing opportunities"}}\n` +
    '\n' +
    'To use a tool, respond with a JSON block like this:\n' +
    '```tool_call\n' +
    '{"name": "tool_name", "arguments": {"arg1": "value1"}}\n' +
    '```\n' +
    '\n' +
    'CRITICAL RULES FOR TOOL CALLS:\n' +
    '1. Action tools (suggest_register_for_leg, suggest_profile_update, etc.) ALWAYS require BOTH the action parameter AND a "reason" parameter\n' +
    `2. The "reason" parameter must be a non-empty string explaining why you're making this suggestion\n` +
    '3. Never omit required parameters - missing parameters will cause the tool to fail\n' +
    '\n' +
    "Try to solve the user's request in one go, if not possible, make multiple tool calls. After receiving tool results, provide your final response to the user.\n"
}
[AI Assistant Service] Messages with tools: {
  message: [
    {
      role: 'system',
      content: 'You are a helpful AI assistant for "SailSmart", a platform that connects sailing boat owners with crew members looking for sailing opportunities.\n' +
        '\n' +
        'Your role is to help users:\n' +
        '- Find sailing journeys and legs that best match their needs, preferences and restrictions\n' +
        '- Understand their options and make informed decisions\n' +
        '- Complete tasks like registering for legs or managing their profile\n' +
        '- Get answers about sailing, the platform, or their account\n' +
        '\n' +
        'IMPORTANT RULES:\n' +
        '1. Always be helpful, friendly, and concise\n' +
        '2. When suggesting actions, use the appropriate "suggest_*" tools - these create pending actions the user must approve\n' +
        '3. Never execute actions directly - always suggest and let the user confirm\n' +
        "4. Be honest about what you don't know\n" +
        '5. For data queries, use the available tools to get accurate information\n' +
        "6. Respect the user's role - don't suggest owner actions to crew members or vice versa\n" +
        '7. Politely and respectfully decline to answer questions that are not related to the platform, sailing or related to sailing and cruising, weather, or sailboat information.\n' +
        '\n' +
        '## LOCATION-BASED SEARCH GUIDANCE\n' +
        '\n' +
        'When users ask about sailing opportunities with location context, use the `search_legs_by_location` tool.\n' +
        '\n' +
        '**CRITICAL: Tool Call Format**\n' +
        'You MUST use nested `departureBbox` and/or `arrivalBbox` objects with numeric coordinates. Example:\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}}\n' +
        '```\n' +
        '\n' +
        'For both departure AND arrival:\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": 1.5, "minLat": 41.0, "maxLng": 2.5, "maxLat": 41.8}, "departureDescription": "Barcelona area", "arrivalBbox": {"minLng": 1.0, "minLat": 38.5, "maxLng": 4.5, "maxLat": 40.5}, "arrivalDescription": "Balearic Islands"}}\n' +
        '```\n' +
        '\n' +
        '**Identifying Location Intent:**\n' +
        '- Departure: "from", "departing", "starting from", "leaving", "sailing out of", "based in", "in the [region]"\n' +
        '- Arrival: "to", "arriving", "going to", "ending in", "destination", "heading to"\n' +
        "- If only one location is mentioned without direction words, assume it's departure and use `departureBbox`\n" +
        '\n' +
        '**Reference Bounding Boxes:**\n' +
        '\n' +
        '*Mediterranean:*\n' +
        '- Full Med: departureBbox: {"minLng": -6, "minLat": 30, "maxLng": 36, "maxLat": 46}\n' +
        '- Western Med: departureBbox: {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}\n' +
        '- Eastern Med: departureBbox: {"minLng": 10, "minLat": 32, "maxLng": 36, "maxLat": 42}\n' +
        '- Barcelona area: departureBbox: {"minLng": 1.5, "minLat": 41.0, "maxLng": 2.5, "maxLat": 41.8}\n' +
        '- Balearic Islands: departureBbox: {"minLng": 1.0, "minLat": 38.5, "maxLng": 4.5, "maxLat": 40.5}\n' +
        '- French Riviera: departureBbox: {"minLng": 5.5, "minLat": 42.8, "maxLng": 7.8, "maxLat": 43.8}\n' +
        '- Croatia: departureBbox: {"minLng": 13.0, "minLat": 42.0, "maxLng": 17.5, "maxLat": 45.5}\n' +
        '- Greek Islands: departureBbox: {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}\n' +
        '\n' +
        '*Atlantic:*\n' +
        '- Canary Islands: departureBbox: {"minLng": -18.5, "minLat": 27.5, "maxLng": -13.5, "maxLat": 29.5}\n' +
        '- Azores: departureBbox: {"minLng": -31.5, "minLat": 36.5, "maxLng": -25.0, "maxLat": 40.0}\n' +
        '- Madeira: departureBbox: {"minLng": -17.5, "minLat": 32.3, "maxLng": -16.2, "maxLat": 33.2}\n' +
        '- Cape Verde: departureBbox: {"minLng": -25.5, "minLat": 14.5, "maxLng": -22.5, "maxLat": 17.5}\n' +
        '- Portugal coast: departureBbox: {"minLng": -10.0, "minLat": 36.9, "maxLng": -7.5, "maxLat": 42.2}\n' +
        '- Galicia (NW Spain): departureBbox: {"minLng": -9.5, "minLat": 41.8, "maxLng": -7.0, "maxLat": 44.0}\n' +
        '\n' +
        '*Caribbean:*\n' +
        '- Eastern Caribbean: departureBbox: {"minLng": -65.0, "minLat": 10.0, "maxLng": -59.0, "maxLat": 19.0}\n' +
        '- Western Caribbean: departureBbox: {"minLng": -88.0, "minLat": 15.0, "maxLng": -77.0, "maxLat": 23.0}\n' +
        '- BVI/USVI: departureBbox: {"minLng": -65.0, "minLat": 17.5, "maxLng": -64.0, "maxLat": 18.8}\n' +
        '- Bahamas: departureBbox: {"minLng": -79.5, "minLat": 21.0, "maxLng": -72.5, "maxLat": 27.5}\n' +
        '\n' +
        '*Northern Europe:*\n' +
        '- Baltic Sea: departureBbox: {"minLng": 10.0, "minLat": 53.5, "maxLng": 30.0, "maxLat": 66.0}\n' +
        '- British Isles: departureBbox: {"minLng": -11.0, "minLat": 49.5, "maxLng": 2.0, "maxLat": 61.0}\n' +
        '\n' +
        '**Handling Ambiguous Locations:**\n' +
        'If the location is ambiguous (e.g., "the coast", "somewhere warm"), ask for clarification. But "the Med" or "Mediterranean" should use Full Med bounds.\n' +
        '\n' +
        '**Always include departureDescription or arrivalDescription** to explain what area you searched.\n' +
        '\n' +
        '\n' +
        '## Current User Context\n' +
        '\n' +
        '**Username:** samthemaster\n' +
        '**Name:** Sam SuperSailor\n' +
        '**Roles:** crew\n' +
        '\n' +
        '### Crew Profile\n' +
        '- Experience Level: Offshore Skipper\n' +
        '- Skills: {"skill_name":"first_aid","description":"Yes. I have EA1 finnish first aid training and can administer first aid when required"}, {"skill_name":"navigation","description":"I can use paper navigational charts and digital navigation tools. I am also able to do celestial navigation and can use sextant and dead-reckoning. I have substantial experience in navigation with celestial objects. "}, {"skill_name":"sailing_experience","description":"I have sailed in different waters, sea, ocean offshore etc. for over 30 years in with different sailboats, big and small and have been in many roles, skipper, crew member, cook, deckhand. I can manage sailboats of any size and in any condition."}, {"skill_name":"cooking","description":"I can also cook"}, {"skill_name":"technical_skills","description":"I can fix and maintain engines, electrical systems and do simple rigging tasks"}, {"skill_name":"night_sailing","description":"I have done night watches a lot"}\n' +
        '- Comfortable with: Extreme sailing, Offshore sailing\n' +
        '- Certifications: I\n' +
        '\n' +
        '## Available Actions\n' +
        '\n' +
        "You have access to various tools to help the user. Use them appropriately based on the user's request.\n" +
        '\n' +
        '## ACTION TOOL GUIDANCE (CRITICAL)\n' +
        '\n' +
        'When using action tools (`suggest_register_for_leg`, `suggest_profile_update`, etc.), ALL parameters are REQUIRED.\n' +
        '\n' +
        '**suggest_register_for_leg** - BOTH `legId` AND `reason` are required:\n' +
        '```tool_call\n' +
        '{"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-of-the-leg", "reason": "This leg matches your offshore experience and preference for challenging sailing. The departure date aligns with your availability."}}\n' +
        '```\n' +
        '\n' +
        '**suggest_profile_update** - BOTH `updates` AND `reason` are required:\n' +
        '```tool_call\n' +
        '{"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"], "sailing_experience": 3}, "reason": "Adding navigation and first aid skills will help you qualify for more offshore passages."}}\n' +
        '```\n' +
        '\n' +
        "**NEVER omit the `reason` parameter** - it explains to the user why you're making the suggestion.\n" +
        '\n' +
        '\n' +
        '\n' +
        'Available tools:\n' +
        '- search_journeys: Search for published sailing journeys or voyages. Use this when user wants to find long sailing journeys that span multiple legs, typically taking several weeks or months to complete.\n' +
        '- search_legs: Search for sailing opportunities or sailing legs or passages. Use this for general searches without specific location requirements. For location-based searches (e.g., "from Barcelona", "to Caribbean"), use search_legs_by_location instead.\n' +
        '- search_legs_by_location: Search for sailing legs by geographic location using bounding box coordinates. Use this when user mentions specific places, regions, or areas for departure or arrival. YOU must determine the appropriate bounding box coordinates for the location. IMPORTANT: Use nested departureBbox/arrivalBbox objects with numeric coordinates. Example: {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}\n' +
        '- get_leg_details: Get detailed information about a specific leg including waypoints, requirements, and current registrations.\n' +
        '- get_journey_details: Get detailed information about a journey including all its legs and the boat.\n' +
        "- get_user_profile: Get the current user's profile information including skills, experience, and preferences.\n" +
        "- get_user_registrations: Get the current user's registration history for sailing legs.\n" +
        '- get_boat_details: Get detailed information about a specific boat.\n' +
        "- analyze_leg_match: Analyze how well the current user's profile matches a specific leg's requirements. Returns match percentage and explanation.\n" +
        '- suggest_register_for_leg: Suggest that the user register for a specific sailing leg. Creates a pending action that the user must approve. IMPORTANT: Both legId and reason parameters are REQUIRED. Example: {"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-here", "reason": "This leg matches your experience level and sailing preferences"}}\n' +
        `- suggest_profile_update: Suggest updates to the user's profile. Creates a pending action that the user must approve. IMPORTANT: Both updates and reason parameters are REQUIRED. Example: {"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"]}, "reason": "Adding these skills will help you qualify for more sailing opportunities"}}\n` +
        '\n' +
        'To use a tool, respond with a JSON block like this:\n' +
        '```tool_call\n' +
        '{"name": "tool_name", "arguments": {"arg1": "value1"}}\n' +
        '```\n' +
        '\n' +
        'CRITICAL RULES FOR TOOL CALLS:\n' +
        '1. Action tools (suggest_register_for_leg, suggest_profile_update, etc.) ALWAYS require BOTH the action parameter AND a "reason" parameter\n' +
        `2. The "reason" parameter must be a non-empty string explaining why you're making this suggestion\n` +
        '3. Never omit required parameters - missing parameters will cause the tool to fail\n' +
        '\n' +
        "Try to solve the user's request in one go, if not possible, make multiple tool calls. After receiving tool results, provide your final response to the user.\n"
    },
    { role: 'user', content: "I'd like to sail in greece" }
  ]
}
Trying groq/llama-3.3-70b-versatile for use case: assistant-chat
Success with groq/llama-3.3-70b-versatile
[AI Assistant Service] AI response received, length: 616
[AI Assistant Service] AI raw response preview: To find sailing opportunities in Greece, I'll search for legs with a departure or arrival location in the Greek Islands. 

```tool_call
{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}, "departureDescription": "Greek Islands", "arrivalBbox": {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}, "arrivalDescription": "Greek Islands"}}
```

This search will cover the entire Greek Islands area. Once I hav...
[AI Assistant Service] Parsing tool calls from response... 
[AI Assistant Service] Found tool call block: {"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}, "departureDescription": "Greek Islands", "arrivalBbox": {"minLng": 
[AI Assistant Service] Parsed tool call: {
  name: 'search_legs_by_location',
  args: {
    departureBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
    departureDescription: 'Greek Islands',
    arrivalBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
    arrivalDescription: 'Greek Islands'
  }
}
[AI Assistant Service] Parsing complete: 1 tool calls found 
[AI Assistant Service] Parsed response: { contentLength: 305, toolCallCount: 1 }
[AI Assistant Service] Tool calls found: [ 'search_legs_by_location' ]
[AI Assistant Service] Executing tools... 
[Tool Executor] Executing 1 tool calls in parallel... [ 'search_legs_by_location' ]
[Tool Executor] Executing tool: search_legs_by_location {
  id: 'tc_1770021052371_0',
  rawArgs: {
    departureBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
    departureDescription: 'Greek Islands',
    arrivalBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
    arrivalDescription: 'Greek Islands'
  },
  normalizedArgs: {
    departureBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
    departureDescription: 'Greek Islands',
    arrivalBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
    arrivalDescription: 'Greek Islands'
  }
}
[Tool Executor] Executing data tool: search_legs_by_location 
[Tool Executor] searchLegsByLocation called with args: {
  departureBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
  departureDescription: 'Greek Islands',
  arrivalBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
  arrivalDescription: 'Greek Islands'
}
[Tool Executor] Using AI-provided bounding boxes: {
  departure: {
    description: 'Greek Islands',
    bbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 }
  },
  arrival: {
    description: 'Greek Islands',
    bbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 }
  }
}
[Tool Executor] Finding legs in bboxes: {
  departureBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 },
  arrivalBbox: { minLng: 23, minLat: 35, maxLng: 28, maxLat: 39.5 }
}
[Tool Executor] Executing spatial query: 
    SELECT DISTINCT l.id
    FROM legs l
    INNER JOIN journeys j ON j.id = l.journey_id
    WHERE j.state = 'Published'
  
      AND EXISTS (
        SELECT 1 FROM waypoints w
        WHERE w.leg_id = l.id
        AND w.index = 0
        AND ST_Within(
          w.location,
          ST_MakeEnvelope(23, 35, 28, 39.5, 4326)
        )
      )
    
      AND EXISTS (
        SELECT 1 FROM waypoints w
        WHERE w.leg_id = l.id
        AND w.index = (SELECT MAX(w2.index) FROM waypoints w2 WHERE w2.leg_id = l.id)
        AND ST_Within(
          w.location,
          ST_MakeEnvelope(23, 35, 28, 39.5, 4326)
        )
      )
     LIMIT 100
[Tool Executor] Found matching leg IDs: 1
[Tool Executor] Tool search_legs_by_location completed successfully {
  resultKeys: [
    'legs',
    'count',
    'searchedDeparture',
    'searchedArrival',
    'departureArea',
    'arrivalArea'
  ]
}
[Tool Executor] All tools completed { successCount: 1, errorCount: 0 }
[AI Assistant Service] Tool execution complete: [ { name: 'search_legs_by_location', hasError: false } ]
[AI Assistant Service] Added tool results to messages, continuing iteration... 
[AI Assistant Service] Tool iteration 2/5 
[AI Assistant Service] Calling AI service... {
  prompt: '\n' +
    'Available tools:\n' +
    '- search_journeys: Search for published sailing journeys or voyages. Use this when user wants to find long sailing journeys that span multiple legs, typically taking several weeks or months to complete.\n' +
    '- search_legs: Search for sailing opportunities or sailing legs or passages. Use this for general searches without specific location requirements. For location-based searches (e.g., "from Barcelona", "to Caribbean"), use search_legs_by_location instead.\n' +
    '- search_legs_by_location: Search for sailing legs by geographic location using bounding box coordinates. Use this when user mentions specific places, regions, or areas for departure or arrival. YOU must determine the appropriate bounding box coordinates for the location. IMPORTANT: Use nested departureBbox/arrivalBbox objects with numeric coordinates. Example: {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}\n' +
    '- get_leg_details: Get detailed information about a specific leg including waypoints, requirements, and current registrations.\n' +
    '- get_journey_details: Get detailed information about a journey including all its legs and the boat.\n' +
    "- get_user_profile: Get the current user's profile information including skills, experience, and preferences.\n" +
    "- get_user_registrations: Get the current user's registration history for sailing legs.\n" +
    '- get_boat_details: Get detailed information about a specific boat.\n' +
    "- analyze_leg_match: Analyze how well the current user's profile matches a specific leg's requirements. Returns match percentage and explanation.\n" +
    '- suggest_register_for_leg: Suggest that the user register for a specific sailing leg. Creates a pending action that the user must approve. IMPORTANT: Both legId and reason parameters are REQUIRED. Example: {"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-here", "reason": "This leg matches your experience level and sailing preferences"}}\n' +
    `- suggest_profile_update: Suggest updates to the user's profile. Creates a pending action that the user must approve. IMPORTANT: Both updates and reason parameters are REQUIRED. Example: {"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"]}, "reason": "Adding these skills will help you qualify for more sailing opportunities"}}\n` +
    '\n' +
    'To use a tool, respond with a JSON block like this:\n' +
    '```tool_call\n' +
    '{"name": "tool_name", "arguments": {"arg1": "value1"}}\n' +
    '```\n' +
    '\n' +
    'CRITICAL RULES FOR TOOL CALLS:\n' +
    '1. Action tools (suggest_register_for_leg, suggest_profile_update, etc.) ALWAYS require BOTH the action parameter AND a "reason" parameter\n' +
    `2. The "reason" parameter must be a non-empty string explaining why you're making this suggestion\n` +
    '3. Never omit required parameters - missing parameters will cause the tool to fail\n' +
    '\n' +
    "Try to solve the user's request in one go, if not possible, make multiple tool calls. After receiving tool results, provide your final response to the user.\n"
}
[AI Assistant Service] Messages with tools: {
  message: [
    {
      role: 'system',
      content: 'You are a helpful AI assistant for "SailSmart", a platform that connects sailing boat owners with crew members looking for sailing opportunities.\n' +
        '\n' +
        'Your role is to help users:\n' +
        '- Find sailing journeys and legs that best match their needs, preferences and restrictions\n' +
        '- Understand their options and make informed decisions\n' +
        '- Complete tasks like registering for legs or managing their profile\n' +
        '- Get answers about sailing, the platform, or their account\n' +
        '\n' +
        'IMPORTANT RULES:\n' +
        '1. Always be helpful, friendly, and concise\n' +
        '2. When suggesting actions, use the appropriate "suggest_*" tools - these create pending actions the user must approve\n' +
        '3. Never execute actions directly - always suggest and let the user confirm\n' +
        "4. Be honest about what you don't know\n" +
        '5. For data queries, use the available tools to get accurate information\n' +
        "6. Respect the user's role - don't suggest owner actions to crew members or vice versa\n" +
        '7. Politely and respectfully decline to answer questions that are not related to the platform, sailing or related to sailing and cruising, weather, or sailboat information.\n' +
        '\n' +
        '## LOCATION-BASED SEARCH GUIDANCE\n' +
        '\n' +
        'When users ask about sailing opportunities with location context, use the `search_legs_by_location` tool.\n' +
        '\n' +
        '**CRITICAL: Tool Call Format**\n' +
        'You MUST use nested `departureBbox` and/or `arrivalBbox` objects with numeric coordinates. Example:\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}}\n' +
        '```\n' +
        '\n' +
        'For both departure AND arrival:\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": 1.5, "minLat": 41.0, "maxLng": 2.5, "maxLat": 41.8}, "departureDescription": "Barcelona area", "arrivalBbox": {"minLng": 1.0, "minLat": 38.5, "maxLng": 4.5, "maxLat": 40.5}, "arrivalDescription": "Balearic Islands"}}\n' +
        '```\n' +
        '\n' +
        '**Identifying Location Intent:**\n' +
        '- Departure: "from", "departing", "starting from", "leaving", "sailing out of", "based in", "in the [region]"\n' +
        '- Arrival: "to", "arriving", "going to", "ending in", "destination", "heading to"\n' +
        "- If only one location is mentioned without direction words, assume it's departure and use `departureBbox`\n" +
        '\n' +
        '**Reference Bounding Boxes:**\n' +
        '\n' +
        '*Mediterranean:*\n' +
        '- Full Med: departureBbox: {"minLng": -6, "minLat": 30, "maxLng": 36, "maxLat": 46}\n' +
        '- Western Med: departureBbox: {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}\n' +
        '- Eastern Med: departureBbox: {"minLng": 10, "minLat": 32, "maxLng": 36, "maxLat": 42}\n' +
        '- Barcelona area: departureBbox: {"minLng": 1.5, "minLat": 41.0, "maxLng": 2.5, "maxLat": 41.8}\n' +
        '- Balearic Islands: departureBbox: {"minLng": 1.0, "minLat": 38.5, "maxLng": 4.5, "maxLat": 40.5}\n' +
        '- French Riviera: departureBbox: {"minLng": 5.5, "minLat": 42.8, "maxLng": 7.8, "maxLat": 43.8}\n' +
        '- Croatia: departureBbox: {"minLng": 13.0, "minLat": 42.0, "maxLng": 17.5, "maxLat": 45.5}\n' +
        '- Greek Islands: departureBbox: {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}\n' +
        '\n' +
        '*Atlantic:*\n' +
        '- Canary Islands: departureBbox: {"minLng": -18.5, "minLat": 27.5, "maxLng": -13.5, "maxLat": 29.5}\n' +
        '- Azores: departureBbox: {"minLng": -31.5, "minLat": 36.5, "maxLng": -25.0, "maxLat": 40.0}\n' +
        '- Madeira: departureBbox: {"minLng": -17.5, "minLat": 32.3, "maxLng": -16.2, "maxLat": 33.2}\n' +
        '- Cape Verde: departureBbox: {"minLng": -25.5, "minLat": 14.5, "maxLng": -22.5, "maxLat": 17.5}\n' +
        '- Portugal coast: departureBbox: {"minLng": -10.0, "minLat": 36.9, "maxLng": -7.5, "maxLat": 42.2}\n' +
        '- Galicia (NW Spain): departureBbox: {"minLng": -9.5, "minLat": 41.8, "maxLng": -7.0, "maxLat": 44.0}\n' +
        '\n' +
        '*Caribbean:*\n' +
        '- Eastern Caribbean: departureBbox: {"minLng": -65.0, "minLat": 10.0, "maxLng": -59.0, "maxLat": 19.0}\n' +
        '- Western Caribbean: departureBbox: {"minLng": -88.0, "minLat": 15.0, "maxLng": -77.0, "maxLat": 23.0}\n' +
        '- BVI/USVI: departureBbox: {"minLng": -65.0, "minLat": 17.5, "maxLng": -64.0, "maxLat": 18.8}\n' +
        '- Bahamas: departureBbox: {"minLng": -79.5, "minLat": 21.0, "maxLng": -72.5, "maxLat": 27.5}\n' +
        '\n' +
        '*Northern Europe:*\n' +
        '- Baltic Sea: departureBbox: {"minLng": 10.0, "minLat": 53.5, "maxLng": 30.0, "maxLat": 66.0}\n' +
        '- British Isles: departureBbox: {"minLng": -11.0, "minLat": 49.5, "maxLng": 2.0, "maxLat": 61.0}\n' +
        '\n' +
        '**Handling Ambiguous Locations:**\n' +
        'If the location is ambiguous (e.g., "the coast", "somewhere warm"), ask for clarification. But "the Med" or "Mediterranean" should use Full Med bounds.\n' +
        '\n' +
        '**Always include departureDescription or arrivalDescription** to explain what area you searched.\n' +
        '\n' +
        '\n' +
        '## Current User Context\n' +
        '\n' +
        '**Username:** samthemaster\n' +
        '**Name:** Sam SuperSailor\n' +
        '**Roles:** crew\n' +
        '\n' +
        '### Crew Profile\n' +
        '- Experience Level: Offshore Skipper\n' +
        '- Skills: {"skill_name":"first_aid","description":"Yes. I have EA1 finnish first aid training and can administer first aid when required"}, {"skill_name":"navigation","description":"I can use paper navigational charts and digital navigation tools. I am also able to do celestial navigation and can use sextant and dead-reckoning. I have substantial experience in navigation with celestial objects. "}, {"skill_name":"sailing_experience","description":"I have sailed in different waters, sea, ocean offshore etc. for over 30 years in with different sailboats, big and small and have been in many roles, skipper, crew member, cook, deckhand. I can manage sailboats of any size and in any condition."}, {"skill_name":"cooking","description":"I can also cook"}, {"skill_name":"technical_skills","description":"I can fix and maintain engines, electrical systems and do simple rigging tasks"}, {"skill_name":"night_sailing","description":"I have done night watches a lot"}\n' +
        '- Comfortable with: Extreme sailing, Offshore sailing\n' +
        '- Certifications: I\n' +
        '\n' +
        '## Available Actions\n' +
        '\n' +
        "You have access to various tools to help the user. Use them appropriately based on the user's request.\n" +
        '\n' +
        '## ACTION TOOL GUIDANCE (CRITICAL)\n' +
        '\n' +
        'When using action tools (`suggest_register_for_leg`, `suggest_profile_update`, etc.), ALL parameters are REQUIRED.\n' +
        '\n' +
        '**suggest_register_for_leg** - BOTH `legId` AND `reason` are required:\n' +
        '```tool_call\n' +
        '{"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-of-the-leg", "reason": "This leg matches your offshore experience and preference for challenging sailing. The departure date aligns with your availability."}}\n' +
        '```\n' +
        '\n' +
        '**suggest_profile_update** - BOTH `updates` AND `reason` are required:\n' +
        '```tool_call\n' +
        '{"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"], "sailing_experience": 3}, "reason": "Adding navigation and first aid skills will help you qualify for more offshore passages."}}\n' +
        '```\n' +
        '\n' +
        "**NEVER omit the `reason` parameter** - it explains to the user why you're making the suggestion.\n" +
        '\n' +
        '\n' +
        '\n' +
        'Available tools:\n' +
        '- search_journeys: Search for published sailing journeys or voyages. Use this when user wants to find long sailing journeys that span multiple legs, typically taking several weeks or months to complete.\n' +
        '- search_legs: Search for sailing opportunities or sailing legs or passages. Use this for general searches without specific location requirements. For location-based searches (e.g., "from Barcelona", "to Caribbean"), use search_legs_by_location instead.\n' +
        '- search_legs_by_location: Search for sailing legs by geographic location using bounding box coordinates. Use this when user mentions specific places, regions, or areas for departure or arrival. YOU must determine the appropriate bounding box coordinates for the location. IMPORTANT: Use nested departureBbox/arrivalBbox objects with numeric coordinates. Example: {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}\n' +
        '- get_leg_details: Get detailed information about a specific leg including waypoints, requirements, and current registrations.\n' +
        '- get_journey_details: Get detailed information about a journey including all its legs and the boat.\n' +
        "- get_user_profile: Get the current user's profile information including skills, experience, and preferences.\n" +
        "- get_user_registrations: Get the current user's registration history for sailing legs.\n" +
        '- get_boat_details: Get detailed information about a specific boat.\n' +
        "- analyze_leg_match: Analyze how well the current user's profile matches a specific leg's requirements. Returns match percentage and explanation.\n" +
        '- suggest_register_for_leg: Suggest that the user register for a specific sailing leg. Creates a pending action that the user must approve. IMPORTANT: Both legId and reason parameters are REQUIRED. Example: {"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-here", "reason": "This leg matches your experience level and sailing preferences"}}\n' +
        `- suggest_profile_update: Suggest updates to the user's profile. Creates a pending action that the user must approve. IMPORTANT: Both updates and reason parameters are REQUIRED. Example: {"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"]}, "reason": "Adding these skills will help you qualify for more sailing opportunities"}}\n` +
        '\n' +
        'To use a tool, respond with a JSON block like this:\n' +
        '```tool_call\n' +
        '{"name": "tool_name", "arguments": {"arg1": "value1"}}\n' +
        '```\n' +
        '\n' +
        'CRITICAL RULES FOR TOOL CALLS:\n' +
        '1. Action tools (suggest_register_for_leg, suggest_profile_update, etc.) ALWAYS require BOTH the action parameter AND a "reason" parameter\n' +
        `2. The "reason" parameter must be a non-empty string explaining why you're making this suggestion\n` +
        '3. Never omit required parameters - missing parameters will cause the tool to fail\n' +
        '\n' +
        "Try to solve the user's request in one go, if not possible, make multiple tool calls. After receiving tool results, provide your final response to the user.\n"
    },
    { role: 'user', content: "I'd like to sail in greece" },
    {
      role: 'assistant',
      content: "To find sailing opportunities in Greece, I'll search for legs with a departure or arrival location in the Greek Islands. \n" +
        '\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}, "departureDescription": "Greek Islands", "arrivalBbox": {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}, "arrivalDescription": "Greek Islands"}}\n' +
        '```\n' +
        '\n' +
        'This search will cover the entire Greek Islands area. Once I have the results, I can help you find the most suitable sailing opportunities based on your experience and preferences.'
    },
    {
      role: 'user',
      content: 'Tool results:\n' +
        'Tool search_legs_by_location result:\n' +
        '{\n' +
        '  "legs": [\n' +
        '    {\n' +
        '      "id": "109066b2-7276-4c0d-a2f3-6aa5bba3d765",\n' +
        '      "name": "Leg 3: Santorini to Crete",\n' +
        '      "description": null,\n' +
        '      "start_date": "2026-05-07T00:00:00+00:00",\n' +
        '      "end_date": "2026-05-08T00:00:00+00:00",\n' +
        '      "crew_needed": 5,\n' +
        '      "skills": [],\n' +
        '      "risk_level": null,\n' +
        '      "min_experience_level": null,\n' +
        '      "journeys": {\n' +
        '        "id": "d1cdea43-da01-492c-b9b4-dfe005aeca30",\n' +
        '        "name": "Ionian to Aegean Odyssey: Lefkada to Crete via Corinth and Santorini",\n' +
        '        "boats": {\n' +
        '          "id": "2fe68187-4f1a-4249-9e1a-859efab21d58",\n' +
        '          "make": "CAPE",\n' +
        '          "name": "Knots n Bolts",\n' +
        '          "model": "GEORGE 38"\n' +
        '        },\n' +
        '        "state": "Published",\n' +
        '        "skills": [],\n' +
        '        "risk_level": "Coastal sailing",\n' +
        '        "min_experience_level": 1\n' +
        '      },\n' +
        '      "combined_skills": [],\n' +
        '      "effective_risk_level": "Coastal sailing",\n' +
        '      "effective_min_experience_level": 1,\n' +
        '      "start_location": "Santorini, South Aegean, Greece",\n' +
        '      "end_location": "Crete, Greece"\n' +
        '    }\n' +
        '  ],\n' +
        '  "count": 1,\n' +
        '  "searchedDeparture": "Greek Islands",\n' +
        '  "searchedArrival": "Greek Islands",\n' +
        '  "departureArea": "broad area",\n' +
        '  "arrivalArea": "broad area"\n' +
        '}\n' +
        '\n' +
        'Please provide your response to the user based on these results.'
    }
  ]
}
Trying groq/llama-3.3-70b-versatile for use case: assistant-chat
Success with groq/llama-3.3-70b-versatile
[AI Assistant Service] AI response received, length: 832
[AI Assistant Service] AI raw response preview: I've found a sailing opportunity in Greece that matches your request. There's a leg from Santorini to Crete on May 7-8, 2026, as part of the "Ionian to Aegean Odyssey" journey. This journey is on a CAPE GEORGE 38 boat named "Knots n Bolts". The leg requires 5 crew members and has a coastal sailing risk level, with a minimum experience level of 1.

Given your extensive offshore sailing experience and skills in areas like navigation, first aid, and sailing experience, you might find this leg an en...
[AI Assistant Service] Parsing tool calls from response... 
[AI Assistant Service] Found tool call block: {"name": "suggest_register_for_leg", "arguments": {"legId": "109066b2-7276-4c0d-a2f3-6aa5bba3d765", "reason": "This leg matches your experience level and is a great opportunity to sail in the beautifu
[AI Assistant Service] Parsed tool call: {
  name: 'suggest_register_for_leg',
  args: {
    legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765',
    reason: 'This leg matches your experience level and is a great opportunity to sail in the beautiful Greek Islands.'
  }
}
[AI Assistant Service] Parsing complete: 1 tool calls found 
[AI Assistant Service] Parsed response: { contentLength: 593, toolCallCount: 1 }
[AI Assistant Service] Tool calls found: [ 'suggest_register_for_leg' ]
[AI Assistant Service] Executing tools... 
[Tool Executor] Executing 1 tool calls in parallel... [ 'suggest_register_for_leg' ]
[Tool Executor] Executing tool: suggest_register_for_leg {
  id: 'tc_1770021054098_0',
  rawArgs: {
    legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765',
    reason: 'This leg matches your experience level and is a great opportunity to sail in the beautiful Greek Islands.'
  },
  normalizedArgs: {
    legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765',
    reason: 'This leg matches your experience level and is a great opportunity to sail in the beautiful Greek Islands.'
  }
}
[Tool Executor] Tool suggest_register_for_leg is an action tool, creating pending action... 
[Tool Executor] Pending action created: aedbb4a3-bcd7-4979-80e0-62fcc2044eab 
[Tool Executor] All tools completed { successCount: 1, errorCount: 0 }
[AI Assistant Service] Tool execution complete: [ { name: 'suggest_register_for_leg', hasError: false } ]
[AI Assistant Service] Added tool results to messages, continuing iteration... 
[AI Assistant Service] Tool iteration 3/5 
[AI Assistant Service] Calling AI service... {
  prompt: '\n' +
    'Available tools:\n' +
    '- search_journeys: Search for published sailing journeys or voyages. Use this when user wants to find long sailing journeys that span multiple legs, typically taking several weeks or months to complete.\n' +
    '- search_legs: Search for sailing opportunities or sailing legs or passages. Use this for general searches without specific location requirements. For location-based searches (e.g., "from Barcelona", "to Caribbean"), use search_legs_by_location instead.\n' +
    '- search_legs_by_location: Search for sailing legs by geographic location using bounding box coordinates. Use this when user mentions specific places, regions, or areas for departure or arrival. YOU must determine the appropriate bounding box coordinates for the location. IMPORTANT: Use nested departureBbox/arrivalBbox objects with numeric coordinates. Example: {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}\n' +
    '- get_leg_details: Get detailed information about a specific leg including waypoints, requirements, and current registrations.\n' +
    '- get_journey_details: Get detailed information about a journey including all its legs and the boat.\n' +
    "- get_user_profile: Get the current user's profile information including skills, experience, and preferences.\n" +
    "- get_user_registrations: Get the current user's registration history for sailing legs.\n" +
    '- get_boat_details: Get detailed information about a specific boat.\n' +
    "- analyze_leg_match: Analyze how well the current user's profile matches a specific leg's requirements. Returns match percentage and explanation.\n" +
    '- suggest_register_for_leg: Suggest that the user register for a specific sailing leg. Creates a pending action that the user must approve. IMPORTANT: Both legId and reason parameters are REQUIRED. Example: {"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-here", "reason": "This leg matches your experience level and sailing preferences"}}\n' +
    `- suggest_profile_update: Suggest updates to the user's profile. Creates a pending action that the user must approve. IMPORTANT: Both updates and reason parameters are REQUIRED. Example: {"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"]}, "reason": "Adding these skills will help you qualify for more sailing opportunities"}}\n` +
    '\n' +
    'To use a tool, respond with a JSON block like this:\n' +
    '```tool_call\n' +
    '{"name": "tool_name", "arguments": {"arg1": "value1"}}\n' +
    '```\n' +
    '\n' +
    'CRITICAL RULES FOR TOOL CALLS:\n' +
    '1. Action tools (suggest_register_for_leg, suggest_profile_update, etc.) ALWAYS require BOTH the action parameter AND a "reason" parameter\n' +
    `2. The "reason" parameter must be a non-empty string explaining why you're making this suggestion\n` +
    '3. Never omit required parameters - missing parameters will cause the tool to fail\n' +
    '\n' +
    "Try to solve the user's request in one go, if not possible, make multiple tool calls. After receiving tool results, provide your final response to the user.\n"
}
[AI Assistant Service] Messages with tools: {
  message: [
    {
      role: 'system',
      content: 'You are a helpful AI assistant for "SailSmart", a platform that connects sailing boat owners with crew members looking for sailing opportunities.\n' +
        '\n' +
        'Your role is to help users:\n' +
        '- Find sailing journeys and legs that best match their needs, preferences and restrictions\n' +
        '- Understand their options and make informed decisions\n' +
        '- Complete tasks like registering for legs or managing their profile\n' +
        '- Get answers about sailing, the platform, or their account\n' +
        '\n' +
        'IMPORTANT RULES:\n' +
        '1. Always be helpful, friendly, and concise\n' +
        '2. When suggesting actions, use the appropriate "suggest_*" tools - these create pending actions the user must approve\n' +
        '3. Never execute actions directly - always suggest and let the user confirm\n' +
        "4. Be honest about what you don't know\n" +
        '5. For data queries, use the available tools to get accurate information\n' +
        "6. Respect the user's role - don't suggest owner actions to crew members or vice versa\n" +
        '7. Politely and respectfully decline to answer questions that are not related to the platform, sailing or related to sailing and cruising, weather, or sailboat information.\n' +
        '\n' +
        '## LOCATION-BASED SEARCH GUIDANCE\n' +
        '\n' +
        'When users ask about sailing opportunities with location context, use the `search_legs_by_location` tool.\n' +
        '\n' +
        '**CRITICAL: Tool Call Format**\n' +
        'You MUST use nested `departureBbox` and/or `arrivalBbox` objects with numeric coordinates. Example:\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}}\n' +
        '```\n' +
        '\n' +
        'For both departure AND arrival:\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": 1.5, "minLat": 41.0, "maxLng": 2.5, "maxLat": 41.8}, "departureDescription": "Barcelona area", "arrivalBbox": {"minLng": 1.0, "minLat": 38.5, "maxLng": 4.5, "maxLat": 40.5}, "arrivalDescription": "Balearic Islands"}}\n' +
        '```\n' +
        '\n' +
        '**Identifying Location Intent:**\n' +
        '- Departure: "from", "departing", "starting from", "leaving", "sailing out of", "based in", "in the [region]"\n' +
        '- Arrival: "to", "arriving", "going to", "ending in", "destination", "heading to"\n' +
        "- If only one location is mentioned without direction words, assume it's departure and use `departureBbox`\n" +
        '\n' +
        '**Reference Bounding Boxes:**\n' +
        '\n' +
        '*Mediterranean:*\n' +
        '- Full Med: departureBbox: {"minLng": -6, "minLat": 30, "maxLng": 36, "maxLat": 46}\n' +
        '- Western Med: departureBbox: {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}\n' +
        '- Eastern Med: departureBbox: {"minLng": 10, "minLat": 32, "maxLng": 36, "maxLat": 42}\n' +
        '- Barcelona area: departureBbox: {"minLng": 1.5, "minLat": 41.0, "maxLng": 2.5, "maxLat": 41.8}\n' +
        '- Balearic Islands: departureBbox: {"minLng": 1.0, "minLat": 38.5, "maxLng": 4.5, "maxLat": 40.5}\n' +
        '- French Riviera: departureBbox: {"minLng": 5.5, "minLat": 42.8, "maxLng": 7.8, "maxLat": 43.8}\n' +
        '- Croatia: departureBbox: {"minLng": 13.0, "minLat": 42.0, "maxLng": 17.5, "maxLat": 45.5}\n' +
        '- Greek Islands: departureBbox: {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}\n' +
        '\n' +
        '*Atlantic:*\n' +
        '- Canary Islands: departureBbox: {"minLng": -18.5, "minLat": 27.5, "maxLng": -13.5, "maxLat": 29.5}\n' +
        '- Azores: departureBbox: {"minLng": -31.5, "minLat": 36.5, "maxLng": -25.0, "maxLat": 40.0}\n' +
        '- Madeira: departureBbox: {"minLng": -17.5, "minLat": 32.3, "maxLng": -16.2, "maxLat": 33.2}\n' +
        '- Cape Verde: departureBbox: {"minLng": -25.5, "minLat": 14.5, "maxLng": -22.5, "maxLat": 17.5}\n' +
        '- Portugal coast: departureBbox: {"minLng": -10.0, "minLat": 36.9, "maxLng": -7.5, "maxLat": 42.2}\n' +
        '- Galicia (NW Spain): departureBbox: {"minLng": -9.5, "minLat": 41.8, "maxLng": -7.0, "maxLat": 44.0}\n' +
        '\n' +
        '*Caribbean:*\n' +
        '- Eastern Caribbean: departureBbox: {"minLng": -65.0, "minLat": 10.0, "maxLng": -59.0, "maxLat": 19.0}\n' +
        '- Western Caribbean: departureBbox: {"minLng": -88.0, "minLat": 15.0, "maxLng": -77.0, "maxLat": 23.0}\n' +
        '- BVI/USVI: departureBbox: {"minLng": -65.0, "minLat": 17.5, "maxLng": -64.0, "maxLat": 18.8}\n' +
        '- Bahamas: departureBbox: {"minLng": -79.5, "minLat": 21.0, "maxLng": -72.5, "maxLat": 27.5}\n' +
        '\n' +
        '*Northern Europe:*\n' +
        '- Baltic Sea: departureBbox: {"minLng": 10.0, "minLat": 53.5, "maxLng": 30.0, "maxLat": 66.0}\n' +
        '- British Isles: departureBbox: {"minLng": -11.0, "minLat": 49.5, "maxLng": 2.0, "maxLat": 61.0}\n' +
        '\n' +
        '**Handling Ambiguous Locations:**\n' +
        'If the location is ambiguous (e.g., "the coast", "somewhere warm"), ask for clarification. But "the Med" or "Mediterranean" should use Full Med bounds.\n' +
        '\n' +
        '**Always include departureDescription or arrivalDescription** to explain what area you searched.\n' +
        '\n' +
        '\n' +
        '## Current User Context\n' +
        '\n' +
        '**Username:** samthemaster\n' +
        '**Name:** Sam SuperSailor\n' +
        '**Roles:** crew\n' +
        '\n' +
        '### Crew Profile\n' +
        '- Experience Level: Offshore Skipper\n' +
        '- Skills: {"skill_name":"first_aid","description":"Yes. I have EA1 finnish first aid training and can administer first aid when required"}, {"skill_name":"navigation","description":"I can use paper navigational charts and digital navigation tools. I am also able to do celestial navigation and can use sextant and dead-reckoning. I have substantial experience in navigation with celestial objects. "}, {"skill_name":"sailing_experience","description":"I have sailed in different waters, sea, ocean offshore etc. for over 30 years in with different sailboats, big and small and have been in many roles, skipper, crew member, cook, deckhand. I can manage sailboats of any size and in any condition."}, {"skill_name":"cooking","description":"I can also cook"}, {"skill_name":"technical_skills","description":"I can fix and maintain engines, electrical systems and do simple rigging tasks"}, {"skill_name":"night_sailing","description":"I have done night watches a lot"}\n' +
        '- Comfortable with: Extreme sailing, Offshore sailing\n' +
        '- Certifications: I\n' +
        '\n' +
        '## Available Actions\n' +
        '\n' +
        "You have access to various tools to help the user. Use them appropriately based on the user's request.\n" +
        '\n' +
        '## ACTION TOOL GUIDANCE (CRITICAL)\n' +
        '\n' +
        'When using action tools (`suggest_register_for_leg`, `suggest_profile_update`, etc.), ALL parameters are REQUIRED.\n' +
        '\n' +
        '**suggest_register_for_leg** - BOTH `legId` AND `reason` are required:\n' +
        '```tool_call\n' +
        '{"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-of-the-leg", "reason": "This leg matches your offshore experience and preference for challenging sailing. The departure date aligns with your availability."}}\n' +
        '```\n' +
        '\n' +
        '**suggest_profile_update** - BOTH `updates` AND `reason` are required:\n' +
        '```tool_call\n' +
        '{"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"], "sailing_experience": 3}, "reason": "Adding navigation and first aid skills will help you qualify for more offshore passages."}}\n' +
        '```\n' +
        '\n' +
        "**NEVER omit the `reason` parameter** - it explains to the user why you're making the suggestion.\n" +
        '\n' +
        '\n' +
        '\n' +
        'Available tools:\n' +
        '- search_journeys: Search for published sailing journeys or voyages. Use this when user wants to find long sailing journeys that span multiple legs, typically taking several weeks or months to complete.\n' +
        '- search_legs: Search for sailing opportunities or sailing legs or passages. Use this for general searches without specific location requirements. For location-based searches (e.g., "from Barcelona", "to Caribbean"), use search_legs_by_location instead.\n' +
        '- search_legs_by_location: Search for sailing legs by geographic location using bounding box coordinates. Use this when user mentions specific places, regions, or areas for departure or arrival. YOU must determine the appropriate bounding box coordinates for the location. IMPORTANT: Use nested departureBbox/arrivalBbox objects with numeric coordinates. Example: {"departureBbox": {"minLng": -6, "minLat": 35, "maxLng": 10, "maxLat": 44}, "departureDescription": "Western Mediterranean"}\n' +
        '- get_leg_details: Get detailed information about a specific leg including waypoints, requirements, and current registrations.\n' +
        '- get_journey_details: Get detailed information about a journey including all its legs and the boat.\n' +
        "- get_user_profile: Get the current user's profile information including skills, experience, and preferences.\n" +
        "- get_user_registrations: Get the current user's registration history for sailing legs.\n" +
        '- get_boat_details: Get detailed information about a specific boat.\n' +
        "- analyze_leg_match: Analyze how well the current user's profile matches a specific leg's requirements. Returns match percentage and explanation.\n" +
        '- suggest_register_for_leg: Suggest that the user register for a specific sailing leg. Creates a pending action that the user must approve. IMPORTANT: Both legId and reason parameters are REQUIRED. Example: {"name": "suggest_register_for_leg", "arguments": {"legId": "uuid-here", "reason": "This leg matches your experience level and sailing preferences"}}\n' +
        `- suggest_profile_update: Suggest updates to the user's profile. Creates a pending action that the user must approve. IMPORTANT: Both updates and reason parameters are REQUIRED. Example: {"name": "suggest_profile_update", "arguments": {"updates": {"skills": ["navigation", "first_aid"]}, "reason": "Adding these skills will help you qualify for more sailing opportunities"}}\n` +
        '\n' +
        'To use a tool, respond with a JSON block like this:\n' +
        '```tool_call\n' +
        '{"name": "tool_name", "arguments": {"arg1": "value1"}}\n' +
        '```\n' +
        '\n' +
        'CRITICAL RULES FOR TOOL CALLS:\n' +
        '1. Action tools (suggest_register_for_leg, suggest_profile_update, etc.) ALWAYS require BOTH the action parameter AND a "reason" parameter\n' +
        `2. The "reason" parameter must be a non-empty string explaining why you're making this suggestion\n` +
        '3. Never omit required parameters - missing parameters will cause the tool to fail\n' +
        '\n' +
        "Try to solve the user's request in one go, if not possible, make multiple tool calls. After receiving tool results, provide your final response to the user.\n"
    },
    { role: 'user', content: "I'd like to sail in greece" },
    {
      role: 'assistant',
      content: "To find sailing opportunities in Greece, I'll search for legs with a departure or arrival location in the Greek Islands. \n" +
        '\n' +
        '```tool_call\n' +
        '{"name": "search_legs_by_location", "arguments": {"departureBbox": {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}, "departureDescription": "Greek Islands", "arrivalBbox": {"minLng": 23.0, "minLat": 35.0, "maxLng": 28.0, "maxLat": 39.5}, "arrivalDescription": "Greek Islands"}}\n' +
        '```\n' +
        '\n' +
        'This search will cover the entire Greek Islands area. Once I have the results, I can help you find the most suitable sailing opportunities based on your experience and preferences.'
    },
    {
      role: 'user',
      content: 'Tool results:\n' +
        'Tool search_legs_by_location result:\n' +
        '{\n' +
        '  "legs": [\n' +
        '    {\n' +
        '      "id": "109066b2-7276-4c0d-a2f3-6aa5bba3d765",\n' +
        '      "name": "Leg 3: Santorini to Crete",\n' +
        '      "description": null,\n' +
        '      "start_date": "2026-05-07T00:00:00+00:00",\n' +
        '      "end_date": "2026-05-08T00:00:00+00:00",\n' +
        '      "crew_needed": 5,\n' +
        '      "skills": [],\n' +
        '      "risk_level": null,\n' +
        '      "min_experience_level": null,\n' +
        '      "journeys": {\n' +
        '        "id": "d1cdea43-da01-492c-b9b4-dfe005aeca30",\n' +
        '        "name": "Ionian to Aegean Odyssey: Lefkada to Crete via Corinth and Santorini",\n' +
        '        "boats": {\n' +
        '          "id": "2fe68187-4f1a-4249-9e1a-859efab21d58",\n' +
        '          "make": "CAPE",\n' +
        '          "name": "Knots n Bolts",\n' +
        '          "model": "GEORGE 38"\n' +
        '        },\n' +
        '        "state": "Published",\n' +
        '        "skills": [],\n' +
        '        "risk_level": "Coastal sailing",\n' +
        '        "min_experience_level": 1\n' +
        '      },\n' +
        '      "combined_skills": [],\n' +
        '      "effective_risk_level": "Coastal sailing",\n' +
        '      "effective_min_experience_level": 1,\n' +
        '      "start_location": "Santorini, South Aegean, Greece",\n' +
        '      "end_location": "Crete, Greece"\n' +
        '    }\n' +
        '  ],\n' +
        '  "count": 1,\n' +
        '  "searchedDeparture": "Greek Islands",\n' +
        '  "searchedArrival": "Greek Islands",\n' +
        '  "departureArea": "broad area",\n' +
        '  "arrivalArea": "broad area"\n' +
        '}\n' +
        '\n' +
        'Please provide your response to the user based on these results.'
    },
    {
      role: 'assistant',
      content: `I've found a sailing opportunity in Greece that matches your request. There's a leg from Santorini to Crete on May 7-8, 2026, as part of the "Ionian to Aegean Odyssey" journey. This journey is on a CAPE GEORGE 38 boat named "Knots n Bolts". The leg requires 5 crew members and has a coastal sailing risk level, with a minimum experience level of 1.\n` +
        '\n' +
        'Given your extensive offshore sailing experience and skills in areas like navigation, first aid, and sailing experience, you might find this leg an enjoyable and relatively relaxed sailing opportunity.\n' +
        '\n' +
        'Would you like to register for this leg? \n' +
        '\n' +
        '```tool_call\n' +
        '{"name": "suggest_register_for_leg", "arguments": {"legId": "109066b2-7276-4c0d-a2f3-6aa5bba3d765", "reason": "This leg matches your experience level and is a great opportunity to sail in the beautiful Greek Islands."}}\n' +
        '```'
    },
    {
      role: 'user',
      content: 'Tool results:\n' +
        'Tool suggest_register_for_leg result:\n' +
        '{\n' +
        '  "success": true,\n' +
        '  "message": "Action suggested and pending user approval. Action ID: aedbb4a3-bcd7-4979-80e0-62fcc2044eab",\n' +
        '  "pendingActionId": "aedbb4a3-bcd7-4979-80e0-62fcc2044eab"\n' +
        '}\n' +
        '\n' +
        'Please provide your response to the user based on these results.'
    }
  ]
}
Trying groq/llama-3.3-70b-versatile for use case: assistant-chat
Success with groq/llama-3.3-70b-versatile
[AI Assistant Service] AI response received, length: 333
[AI Assistant Service] AI raw response preview: I've suggested that you register for the Santorini to Crete leg, and this suggestion is now pending your approval. You can review and approve or reject this suggestion in your account.

If you have any other questions or need further assistance, feel free to ask. Otherwise, I hope you have a great time sailing in the Greek Islands!
[AI Assistant Service] Parsing tool calls from response... 
[AI Assistant Service] Parsing complete: 0 tool calls found 
[AI Assistant Service] Parsed response: { contentLength: 333, toolCallCount: 0 }
[AI Assistant Service] No tool calls found, returning final response 
[AI Assistant Service] AI response received: { contentLength: 333, toolCallCount: 2, toolResultCount: 2 }
[AI Assistant Service] Saving assistant message... 
[AI Assistant Service] Assistant message saved: cd5148f2-dbdd-43a9-a777-0d85c643cd13
[AI Assistant Service] Updating conversation title... 
[AI Assistant Service] Checking for pending actions... 
[AI Assistant Service] Pending actions: 1
[AI Assistant Service] === Chat complete === 
[API Chat Route] Chat response received: {
  conversationId: '6cb09623-2f24-4d01-90ac-a280a7fbb5ef',
  messageId: 'cd5148f2-dbdd-43a9-a777-0d85c643cd13',
  pendingActionsCount: 1
}
[API Chat Route] === Chat completed successfully === 
 POST /api/ai/assistant/chat 200 in 5.6s (compile: 113ms, proxy.ts: 4ms, render: 5.5s)
 GET /api/ai/assistant/conversations 200 in 245ms (compile: 2ms, proxy.ts: 2ms, render: 240ms)
 GET /api/notifications?limit=5&offset=0 200 in 621ms (compile: 8ms, proxy.ts: 4ms, render: 609ms)
[API Approve Action] === Approving action === { actionId: 'aedbb4a3-bcd7-4979-80e0-62fcc2044eab' }
[API Approve Action] Found action: { actionType: 'register_for_leg', status: 'pending' }
[API Approve Action] Executing action... 
[Action Executor] --- executeAction started --- {
  actionId: 'aedbb4a3-bcd7-4979-80e0-62fcc2044eab',
  actionType: 'register_for_leg'
}
[Action Executor] Executing action type: register_for_leg 
[Action Executor] Action succeeded, updating status to approved 
[Action Executor] --- executeAction completed --- { success: true }
[API Approve Action] === Action approved and executed successfully === 
 POST /api/ai/assistant/actions/aedbb4a3-bcd7-4979-80e0-62fcc2044eab/approve 200 in 2.2s (compile: 1471ms, proxy.ts: 3ms, render: 746ms)
 GET /crew/registrations 200 in 779ms (compile: 753ms, render: 26ms)
 GET /api/registrations/crew/details 200 in 926ms (compile: 48ms, proxy.ts: 3ms, render: 875ms)
 GET /api/registrations/crew/details 200 in 832ms (compile: 3ms, proxy.ts: 3ms, render: 825ms)
 GET /crew/dashboard 200 in 28ms (compile: 9ms, render: 19ms)
 GET /api/legs/viewport?min_lng=-76.50807287862972&min_lat=-13.903862518368783&max_lng=76.5080728786296&max_lat=53.90386251837367&min_experience_level=4 200 in 293ms (compile: 3ms, proxy.ts: 3ms, render: 287ms)
 GET /api/legs/viewport?min_lng=-72.06881604296359&min_lat=4.562046968361244&max_lng=103.75836842127967&max_lat=72.66217480829891&min_experience_level=4 200 in 184ms (compile: 3ms, proxy.ts: 2ms, render: 179ms)
 GET /api/legs/viewport?min_lng=-54.587897141533105&min_lat=9.760214580136974&max_lng=94.397278309228&max_lat=56.88028803699234&min_experience_level=4 200 in 172ms (compile: 3ms, proxy.ts: 3ms, render: 166ms)
 GET /api/legs/viewport?min_lng=-22.473262725998666&min_lat=19.647818185044343&max_lng=69.13496066865378&max_lat=49.972356291899644&min_experience_level=4 200 in 202ms (compile: 3ms, proxy.ts: 2ms, render: 197ms)
 GET /api/legs/viewport?min_lng=-44.46190462830185&min_lat=6.129925983465782&max_lng=96.0633747929669&max_lat=51.70148976894751&min_experience_level=4 200 in 196ms (compile: 6ms, proxy.ts: 3ms, render: 187ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
    Symbol(async_id_symbol): 80685,
    Symbol(trigger_async_id_symbol): 80677
  },
  resolvedParams: { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
  legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765'
}
 GET /api/legs/109066b2-7276-4c0d-a2f3-6aa5bba3d765/waypoints 200 in 347ms (compile: 16ms, proxy.ts: 3ms, render: 328ms)
 GET /api/legs/viewport?min_lng=23.356468795374127&min_lat=35.23103379535705&max_lng=27.207631470763573&max_lat=36.523449791784216&min_experience_level=4 200 in 163ms (compile: 4ms, proxy.ts: 3ms, render: 157ms)
 GET /api/legs/viewport?min_lng=18.40301579418474&min_lat=35.48289493996975&max_lng=31.200984986811648&max_lat=39.66574431855395&min_experience_level=4 200 in 136ms (compile: 3ms, proxy.ts: 2ms, render: 131ms)
 GET /api/legs/viewport?min_lng=15.056265137879876&min_lat=34.855969011702&max_lng=32.78174894845438&max_lat=40.6190492605989&min_experience_level=4 200 in 154ms (compile: 3ms, proxy.ts: 2ms, render: 149ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '7e2f5bb2-819d-400c-93cf-c358ea880939' },
    Symbol(async_id_symbol): 85040,
    Symbol(trigger_async_id_symbol): 85032
  },
  resolvedParams: { legId: '7e2f5bb2-819d-400c-93cf-c358ea880939' },
  legId: '7e2f5bb2-819d-400c-93cf-c358ea880939'
}
 GET /api/legs/7e2f5bb2-819d-400c-93cf-c358ea880939/waypoints 200 in 150ms (compile: 13ms, proxy.ts: 4ms, render: 134ms)
 GET /api/legs/viewport?min_lng=21.413021338451188&min_lat=36.26268320000034&max_lng=26.952064661545478&max_lat=38.0904847999999&min_experience_level=4 200 in 169ms (compile: 3ms, proxy.ts: 2ms, render: 164ms)
 GET /api/legs/viewport?min_lng=1.5179434630194066&min_lat=28.124074361382284&max_lng=43.193826878853145&max_lat=41.80496966448263&min_experience_level=4 200 in 146ms (compile: 3ms, proxy.ts: 2ms, render: 141ms)
 GET /api/legs/viewport?min_lng=3.0914048603649746&min_lat=33.69229350370887&max_lng=46.07631039650508&max_lat=46.90996640691293&min_experience_level=4 200 in 132ms (compile: 3ms, proxy.ts: 2ms, render: 127ms)
 GET /api/notifications?limit=5&offset=0 200 in 566ms (compile: 8ms, proxy.ts: 4ms, render: 555ms)
 GET /api/legs/viewport?min_lng=-45.605461932903694&min_lat=20.845897830276925&max_lng=81.23892378303907&max_lat=57.979481288246006&min_experience_level=4 200 in 298ms (compile: 2ms, proxy.ts: 2ms, render: 294ms)
 GET /api/legs/viewport?min_lng=-6.015942578522868&min_lat=29.1856468720743&max_lng=51.44011507252452&max_lat=47.06834650661213&min_experience_level=4 200 in 198ms (compile: 2ms, proxy.ts: 3ms, render: 193ms)
 GET /api/legs/viewport?min_lng=10.506350627168814&min_lat=34.79896296490598&max_lng=37.37102677589391&max_lat=43.322897759707956&min_experience_level=4 200 in 187ms (compile: 3ms, proxy.ts: 3ms, render: 181ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '7e2f5bb2-819d-400c-93cf-c358ea880939' },
    Symbol(async_id_symbol): 93524,
    Symbol(trigger_async_id_symbol): 93516
  },
  resolvedParams: { legId: '7e2f5bb2-819d-400c-93cf-c358ea880939' },
  legId: '7e2f5bb2-819d-400c-93cf-c358ea880939'
}
 GET /api/legs/7e2f5bb2-819d-400c-93cf-c358ea880939/waypoints 200 in 175ms (compile: 13ms, proxy.ts: 3ms, render: 160ms)
 GET /api/legs/viewport?min_lng=21.413021338451188&min_lat=36.26268320000034&max_lng=26.952064661545478&max_lat=38.0904847999999&min_experience_level=4 200 in 143ms (compile: 3ms, proxy.ts: 3ms, render: 137ms)
 GET /api/legs/viewport?min_lng=20.538142909865513&min_lat=35.88187033911646&max_lng=28.89970943930757&max_lat=38.637698942241485&min_experience_level=4 200 in 164ms (compile: 2ms, proxy.ts: 3ms, render: 158ms)
 GET /api/legs/viewport?min_lng=13.525765632766507&min_lat=33.95875490455309&max_lng=32.508421638353155&max_lat=40.17765506490835&min_experience_level=4 200 in 143ms (compile: 3ms, proxy.ts: 2ms, render: 138ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
    Symbol(async_id_symbol): 97725,
    Symbol(trigger_async_id_symbol): 97717
  },
  resolvedParams: { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
  legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765'
}
 GET /api/legs/109066b2-7276-4c0d-a2f3-6aa5bba3d765/waypoints 200 in 150ms (compile: 16ms, proxy.ts: 3ms, render: 132ms)
 GET /api/legs/viewport?min_lng=23.361459408380426&min_lat=35.232514299999494&max_lng=27.20538859162096&max_lat=36.52249869999915&min_experience_level=4 200 in 149ms (compile: 3ms, proxy.ts: 2ms, render: 144ms)
 GET /api/legs/viewport?min_lng=-7.393936206007652&min_lat=29.222328533281782&max_lng=37.22236871001587&max_lat=43.589272159456186&min_experience_level=4 200 in 317ms (compile: 3ms, proxy.ts: 2ms, render: 311ms)
 GET /api/legs/viewport?min_lng=-83.92687914289232&min_lat=10.57066878248257&max_lng=104.26154669942753&max_lat=78.66959243426658&min_experience_level=4 200 in 163ms (compile: 7ms, proxy.ts: 3ms, render: 154ms)
 GET /api/legs/viewport?min_lng=-102.8374367195096&min_lat=8.947175931828525&max_lng=81.33762015029828&max_lat=75.63917217193008&min_experience_level=4 200 in 227ms (compile: 3ms, proxy.ts: 2ms, render: 222ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: 'e7237510-704f-4d99-b11e-016b8a6fb8d6' },
    Symbol(async_id_symbol): 103351,
    Symbol(trigger_async_id_symbol): 103343
  },
  resolvedParams: { legId: 'e7237510-704f-4d99-b11e-016b8a6fb8d6' },
  legId: 'e7237510-704f-4d99-b11e-016b8a6fb8d6'
}
 GET /api/legs/e7237510-704f-4d99-b11e-016b8a6fb8d6/waypoints 200 in 137ms (compile: 13ms, proxy.ts: 3ms, render: 121ms)
 GET /api/legs/viewport?min_lng=-63.58935474925954&min_lat=11.36475083177588&max_lng=111.58838180040391&max_lat=68.93758137402077&min_experience_level=4 200 in 149ms (compile: 3ms, proxy.ts: 3ms, render: 143ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: 'b1c64996-8cb8-412d-8058-b186431feac1' },
    Symbol(async_id_symbol): 106013,
    Symbol(trigger_async_id_symbol): 106005
  },
  resolvedParams: { legId: 'b1c64996-8cb8-412d-8058-b186431feac1' },
  legId: 'b1c64996-8cb8-412d-8058-b186431feac1'
}
 GET /api/legs/b1c64996-8cb8-412d-8058-b186431feac1/waypoints 200 in 152ms (compile: 13ms, proxy.ts: 3ms, render: 137ms)
 GET /api/legs/viewport?min_lng=16.8071735612875&min_lat=62.77034224972101&max_lng=30.26832643871336&max_lat=65.23173762451447&min_experience_level=4 200 in 136ms (compile: 2ms, proxy.ts: 2ms, render: 132ms)
 GET /api/legs/viewport?min_lng=-36.433523547772324&min_lat=38.119016771991824&max_lng=95.71447447793207&max_lat=70.23040620895179&min_experience_level=4 200 in 160ms (compile: 5ms, proxy.ts: 5ms, render: 150ms)
 GET /api/legs/viewport?min_lng=-82.32714786699654&min_lat=10.201426848402647&max_lng=107.18413349369598&max_lat=79.97134866556954&min_experience_level=4 200 in 147ms (compile: 2ms, proxy.ts: 4ms, render: 141ms)
 GET /api/legs/viewport?min_lng=-64.28142283576845&min_lat=-8.593383024304956&max_lng=82.18245330383957&max_lat=45.28962414270538&min_experience_level=4 200 in 148ms (compile: 2ms, proxy.ts: 2ms, render: 143ms)
 GET /api/legs/viewport?min_lng=-150.64723802747858&min_lat=-1.395337958467067&max_lng=11.208701333106006&max_lat=58.566806687066475&min_experience_level=4 200 in 173ms (compile: 3ms, proxy.ts: 3ms, render: 168ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '0b2ffbfd-e7a6-4e55-b93d-9383592e4ffe' },
    Symbol(async_id_symbol): 112610,
    Symbol(trigger_async_id_symbol): 112602
  },
  resolvedParams: { legId: '0b2ffbfd-e7a6-4e55-b93d-9383592e4ffe' },
  legId: '0b2ffbfd-e7a6-4e55-b93d-9383592e4ffe'
}
 GET /api/legs/0b2ffbfd-e7a6-4e55-b93d-9383592e4ffe/waypoints 200 in 167ms (compile: 15ms, proxy.ts: 2ms, render: 151ms)
 GET /api/legs/viewport?min_lng=-83.60699171560974&min_lat=27.02384578269735&max_lng=-6.484999800640054&max_lat=50.39379432979911&min_experience_level=4 200 in 173ms (compile: 3ms, proxy.ts: 2ms, render: 168ms)
 GET /api/legs/viewport?min_lng=-31.870015155910323&min_lat=32.48826435237021&max_lng=52.0564553156363&max_lat=56.107807381466586&min_experience_level=4 200 in 151ms (compile: 3ms, proxy.ts: 2ms, render: 146ms)
 GET /api/legs/viewport?min_lng=-58.755864923978876&min_lat=17.02797478643309&max_lng=86.19776762803622&max_lat=59.906085150682486&min_experience_level=4 200 in 162ms (compile: 3ms, proxy.ts: 3ms, render: 157ms)
 GET /api/legs/viewport?min_lng=-14.6970086397138&min_lat=40.36572223618896&max_lng=61.82689922772491&max_lat=60.04341621385126&min_experience_level=4 200 in 135ms (compile: 2ms, proxy.ts: 2ms, render: 131ms)
 GET /api/legs/viewport?min_lng=-13.694892837270515&min_lat=44.031981243678075&max_lng=67.28039207821564&max_lat=63.44724963612808&min_experience_level=4 200 in 127ms (compile: 3ms, proxy.ts: 2ms, render: 122ms)
 GET /api/ai/assistant/conversations 200 in 257ms (compile: 3ms, proxy.ts: 3ms, render: 251ms)
 GET /api/legs/viewport?min_lng=-14.89255879297437&min_lat=47.94785783587034&max_lng=71.37094162852821&max_lat=66.97078713659923&min_experience_level=4 200 in 548ms (compile: 2ms, proxy.ts: 2ms, render: 543ms)
 GET /api/legs/viewport?min_lng=-23.730143243504784&min_lat=45.03715017086333&max_lng=78.56911647731465&max_lat=68.15865161030527&min_experience_level=4 200 in 331ms (compile: 3ms, proxy.ts: 3ms, render: 325ms)
 GET /api/notifications?limit=5&offset=0 200 in 794ms (compile: 6ms, proxy.ts: 3ms, render: 786ms)
 GET /api/legs/viewport?min_lng=-61.51005242343673&min_lat=28.31284785230021&max_lng=106.45362415639363&max_lat=73.8845595260116&min_experience_level=4 200 in 355ms (compile: 3ms, proxy.ts: 3ms, render: 350ms)
 GET /api/legs/viewport?min_lng=-4.268100640019355&min_lat=56.12912947421603&max_lng=48.51595050661615&max_lat=66.61144359211698&min_experience_level=4 200 in 180ms (compile: 3ms, proxy.ts: 3ms, render: 175ms)
 GET /api/legs/viewport?min_lng=-9.02597841941477&min_lat=54.04332791062674&max_lng=42.87029256329322&max_lat=64.9324473780172&min_experience_level=4 200 in 150ms (compile: 3ms, proxy.ts: 2ms, render: 145ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '8638448c-d806-47c6-891a-602f85b50f91' },
    Symbol(async_id_symbol): 126609,
    Symbol(trigger_async_id_symbol): 126601
  },
  resolvedParams: { legId: '8638448c-d806-47c6-891a-602f85b50f91' },
  legId: '8638448c-d806-47c6-891a-602f85b50f91'
}
 GET /api/legs/8638448c-d806-47c6-891a-602f85b50f91/waypoints 200 in 164ms (compile: 14ms, proxy.ts: 2ms, render: 147ms)
 GET /api/legs/viewport?min_lng=5.9447002149673835&min_lat=54.252995967846346&max_lng=46.550111399225756&max_lat=63.00637838156007&min_experience_level=4 200 in 151ms (compile: 3ms, proxy.ts: 3ms, render: 145ms)
 GET /api/legs/viewport?min_lng=-22.140883281006637&min_lat=44.414882849816195&max_lng=66.77293095306476&max_lat=65.24056161954545&min_experience_level=4 200 in 218ms (compile: 3ms, proxy.ts: 2ms, render: 212ms)
 GET /api/notifications?limit=5&offset=0 200 in 1437ms (compile: 7ms, proxy.ts: 4ms, render: 1425ms)
 GET /api/legs/viewport?min_lng=-31.03418311712764&min_lat=50.3364815535887&max_lng=67.67468464033993&max_lat=70.57928927945747&min_experience_level=4 200 in 555ms (compile: 2ms, proxy.ts: 3ms, render: 549ms)
 GET /api/legs/viewport?min_lng=-48.27937832743157&min_lat=21.05022555072935&max_lng=77.75702990396263&max_lat=57.92534860965381&min_experience_level=4 200 in 275ms (compile: 3ms, proxy.ts: 2ms, render: 271ms)
 GET /api/legs/viewport?min_lng=-5.992826862714111&min_lat=27.895160034502723&max_lng=53.17795343008774&max_lat=46.47379390090802&min_experience_level=4 200 in 232ms (compile: 2ms, proxy.ts: 3ms, render: 227ms)
[Waypoints API] Received params: {
  params: Promise {
    { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
    Symbol(async_id_symbol): 134321,
    Symbol(trigger_async_id_symbol): 134313
  },
  resolvedParams: { legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765' },
  legId: '109066b2-7276-4c0d-a2f3-6aa5bba3d765'
}
 GET /api/legs/109066b2-7276-4c0d-a2f3-6aa5bba3d765/waypoints 200 in 233ms (compile: 13ms, proxy.ts: 3ms, render: 218ms)
 GET /api/legs/viewport?min_lng=23.361459408380426&min_lat=35.232514299999494&max_lng=27.20538859162096&max_lat=36.52249869999915&min_experience_level=4 200 in 193ms (compile: 4ms, proxy.ts: 2ms, render: 187ms)
 GET / 200 in 43ms (compile: 12ms, render: 32ms)
 GET / 200 in 39ms (compile: 10ms, render: 29ms)
 GET /owner/boats 200 in 107ms (compile: 74ms, render: 32ms)
 GET /owner/boats 200 in 53ms (compile: 11ms, render: 42ms)
 GET /api/ai/assistant/suggestions 200 in 455ms (compile: 13ms, proxy.ts: 11ms, render: 431ms)
 GET /api/ai/assistant/actions 200 in 464ms (compile: 15ms, proxy.ts: 6ms, render: 443ms)
 GET /api/notifications?limit=5&offset=0 200 in 612ms (compile: 34ms, proxy.ts: 5ms, render: 573ms)
 GET /api/ai/assistant/actions 200 in 247ms (compile: 4ms, proxy.ts: 3ms, render: 239ms)
 GET /api/ai/assistant/suggestions 200 in 266ms (compile: 4ms, proxy.ts: 3ms, render: 258ms)
 GET /owner/registrations 200 in 68ms (compile: 48ms, render: 20ms)
 GET /api/registrations/owner/all?sort_by=created_at&sort_order=desc&limit=20&offset=0 200 in 1588ms (compile: 37ms, proxy.ts: 6ms, render: 1546ms)
LogoWithText userRole: 
 GET / 200 in 106ms (compile: 17ms, render: 89ms)
 GET /api/ai/assistant/actions 200 in 474ms (compile: 19ms, proxy.ts: 7ms, render: 448ms)
 GET /api/ai/assistant/suggestions 200 in 509ms (compile: 15ms, proxy.ts: 10ms, render: 484ms)
 GET /api/notifications?limit=5&offset=0 200 in 605ms (compile: 25ms, proxy.ts: 15ms, render: 565ms)
 GET /api/ai/assistant/actions 200 in 275ms (compile: 7ms, proxy.ts: 7ms, render: 261ms)
 GET /api/ai/assistant/suggestions 200 in 262ms (compile: 5ms, proxy.ts: 6ms, render: 250ms)
 GET /api/notifications?limit=5&offset=0 200 in 473ms (compile: 12ms, proxy.ts: 7ms, render: 454ms)
 GET /api/notifications?limit=5&offset=0 200 in 467ms (compile: 10ms, proxy.ts: 2ms, render: 454ms)
 GET /owner/registrations 200 in 30ms (compile: 11ms, render: 19ms)
 GET /api/registrations/owner/all?sort_by=created_at&sort_order=desc&limit=20&offset=0 200 in 1847ms (compile: 5ms, proxy.ts: 4ms, render: 1838ms)
▲ Next.js 16.1.1 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://192.168.1.5:3000
- Environments: .env.local

✓ Starting...
✓ Ready in 1591ms
LogoWithText userRole: 
 GET /owner/registrations 200 in 2.4s (compile: 2.0s, render: 368ms)
 GET /api/ai/assistant/actions 200 in 731ms (compile: 198ms, proxy.ts: 73ms, render: 460ms)
 GET /api/ai/assistant/suggestions 200 in 740ms (compile: 100ms, proxy.ts: 75ms, render: 566ms)
 GET /api/notifications?limit=5&offset=0 200 in 877ms (compile: 167ms, proxy.ts: 71ms, render: 639ms)
 GET /api/ai/assistant/suggestions 200 in 277ms (compile: 12ms, proxy.ts: 6ms, render: 260ms)
 GET /api/ai/assistant/actions 200 in 364ms (compile: 9ms, proxy.ts: 5ms, render: 349ms)
 GET /api/notifications?limit=5&offset=0 200 in 411ms (compile: 13ms, proxy.ts: 3ms, render: 396ms)
 GET /api/notifications?limit=5&offset=0 200 in 476ms (compile: 12ms, proxy.ts: 3ms, render: 462ms)
 GET /api/registrations/owner/all?sort_by=created_at&sort_order=desc&limit=20&offset=0 200 in 1829ms (compile: 132ms, proxy.ts: 72ms, render: 1625ms)
 GET /owner/registrations/3c2c4db6-d6c4-4cfb-b44d-647cf43468d8 200 in 1129ms (compile: 1086ms, render: 42ms)
 GET /api/registrations/3c2c4db6-d6c4-4cfb-b44d-647cf43468d8/details 200 in 1951ms (compile: 813ms, proxy.ts: 7ms, render: 1132ms)
LogoWithText userRole: 
 GET /Beginner 404 in 211ms (compile: 110ms, render: 100ms)
 GET /api/registrations/3c2c4db6-d6c4-4cfb-b44d-647cf43468d8/details 200 in 1026ms (compile: 13ms, proxy.ts: 3ms, render: 1009ms)
 GET /owner/journeys 200 in 89ms (compile: 64ms, render: 25ms)
 GET /owner/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/edit 200 in 680ms (compile: 642ms, render: 39ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/auto-approval 200 in 1102ms (compile: 758ms, proxy.ts: 10ms, render: 334ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/requirements 200 in 1226ms (compile: 715ms, proxy.ts: 10ms, render: 502ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/auto-approval 200 in 267ms (compile: 16ms, proxy.ts: 3ms, render: 248ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/requirements 200 in 362ms (compile: 15ms, proxy.ts: 3ms, render: 343ms)
 GET /api/notifications?limit=5&offset=0 200 in 488ms (compile: 7ms, proxy.ts: 3ms, render: 478ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/auto-approval 200 in 385ms (compile: 42ms, proxy.ts: 5ms, render: 338ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/requirements 200 in 522ms (compile: 24ms, proxy.ts: 5ms, render: 493ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/auto-approval 200 in 277ms (compile: 6ms, proxy.ts: 6ms, render: 265ms)
 GET /api/journeys/d1cdea43-da01-492c-b9b4-dfe005aeca30/requirements 200 in 412ms (compile: 5ms, proxy.ts: 3ms, render: 404ms)
 GET /owner/registrations 200 in 28ms (compile: 9ms, render: 19ms)
 GET /api/registrations/owner/all?sort_by=created_at&sort_order=desc&limit=20&offset=0 200 in 1488ms (compile: 3ms, proxy.ts: 6ms, render: 1480ms)
 GET /owner/registrations/3c2c4db6-d6c4-4cfb-b44d-647cf43468d8 200 in 38ms (compile: 15ms, render: 23ms)
 GET /api/registrations/3c2c4db6-d6c4-4cfb-b44d-647cf43468d8/details 200 in 1094ms (compile: 16ms, proxy.ts: 7ms, render: 1071ms)
LogoWithText userRole: 
 GET /Beginner 404 in 59ms (compile: 12ms, render: 47ms)
 GET /api/registrations/3c2c4db6-d6c4-4cfb-b44d-647cf43468d8/details 200 in 941ms (compile: 13ms, proxy.ts: 2ms, render: 925ms)
 GET /api/notifications?limit=5&offset=0 200 in 624ms (compile: 11ms, proxy.ts: 3ms, render: 609ms)
 GET /api/notifications?limit=5&offset=0 200 in 580ms (compile: 12ms, proxy.ts: 5ms, render: 564ms)
 GET /api/registrations/3c2c4db6-d6c4-4cfb-b44d-647cf43468d8/details 404 in 660ms (compile: 19ms, proxy.ts: 8ms, render: 633ms)
LogoWithText userRole: 
 GET / 200 in 152ms (compile: 46ms, render: 106ms)
 GET /api/ai/assistant/actions 200 in 326ms (compile: 28ms, proxy.ts: 16ms, render: 283ms)
 GET /api/ai/assistant/suggestions 200 in 461ms (compile: 17ms, proxy.ts: 16ms, render: 428ms)
 GET /api/notifications?limit=5&offset=0 200 in 591ms (compile: 54ms, proxy.ts: 16ms, render: 521ms)
 GET /api/ai/assistant/actions 200 in 281ms (compile: 9ms, proxy.ts: 6ms, render: 267ms)
 GET /api/ai/assistant/suggestions 200 in 347ms (compile: 10ms, proxy.ts: 2ms, render: 335ms)
 GET /api/notifications?limit=5&offset=0 200 in 397ms (compile: 18ms, proxy.ts: 8ms, render: 371ms)
 GET /api/notifications?limit=5&offset=0 200 in 494ms (compile: 14ms, proxy.ts: 3ms, render: 477ms)
 GET / 200 in 36ms (compile: 11ms, render: 25ms)
 GET / 200 in 43ms (compile: 7ms, render: 36ms)
